{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"],"fields":{"title":{"boost":1000.0},"text":{"boost":1.0},"tags":{"boost":1000000.0}}},"docs":[{"location":"","title":"<code>bumplot</code>: easily create and customize bump charts in Python","text":"<p><code>bumplot</code> is a small Python package made to facilitate the creation of bump charts using matplotlib and B\u00e9zier curves. It has high customization capabilities too!</p> <p>Bump charts are useful when the focus is on comparing relative rankings\u2014who is ahead of whom\u2014rather than the exact magnitude of the differences.</p> <p> </p>"},{"location":"#quick-start","title":"Quick start","text":"<pre><code># mkdocs: render\nimport matplotlib.pyplot as plt\nimport pandas as pd\n\nfrom bumplot import bumplot\n\ndata = pd.DataFrame(\n    {\n        \"x\": [2020, 2021, 2022, 2023],\n        \"A\": [10, 50, 20, 80],\n        \"B\": [40, 30, 60, 10],\n        \"C\": [90, 20, 70, 40],\n    }\n)\n\nfig, ax = plt.subplots(figsize=(8, 4))\nbumplot(\n    x=\"x\",\n    y_columns=[\"A\", \"B\", \"C\"],\n    data=data,\n    curve_force=0.5,\n    plot_kwargs={\"lw\": 4},\n    scatter_kwargs={\"s\": 150, \"ec\": \"black\", \"lw\": 2},\n    colors=[\"#ffbe0b\", \"#ff006e\", \"#3a86ff\"],\n)\nax.legend()\nax.spines[[\"top\", \"right\", \"left\", \"bottom\"]].set_visible(False)\nax.grid(alpha=0.4)\n</code></pre> <p>See more examples</p>"},{"location":"#installation","title":"Installation","text":"<pre><code>pip install bumplot\n</code></pre>"},{"location":"#features","title":"Features","text":"<ul> <li>Automatic ranking of your data (with support for both <code>pandas</code> and <code>polars</code>)</li> <li>Accept categorical data for x-axis</li> <li>Infinite customization capabilities</li> <li>Easy control of the curvature intensity</li> </ul>"},{"location":"advanced-usage/","title":"Advanced usage","text":"<p><code>bumplot</code> is designed to integrate seamlessly with matplotlib and allow you to control virtually everything.</p> <p>Here you will find examples that show how to use <code>bumplot</code> in more complex, but also more realistic, cases based on real data.</p> <p>These examples are also designed to be easy to reproduce: you should be able to simply copy and paste the code onto your computer.</p> <p> </p>"},{"location":"advanced-usage/#water-sources-in-africa","title":"Water sources in Africa","text":"<pre><code># mkdocs: render\nimport pandas as pd\nimport matplotlib.pyplot as plt\nfrom pyfonts import set_default_font, load_google_font\n\nfrom bumplot import bumplot, opts_from_color\n\nurl = \"https://raw.githubusercontent.com/y-sunflower/bumplot/main/docs/data/water-africa.csv\"\ndf = pd.read_csv(url)\n\nfont = load_google_font(\"Poppins\")\nset_default_font(font)\n\nhighlight = {\n    \"Zambia\": opts_from_color(\"#2a9d8f\", zorder=2, line_width=3, marker_size=100),\n    \"Tanzania\": opts_from_color(\"#bb3e03\", zorder=2, line_width=3, marker_size=100),\n}\ncountries = [name for name in df.columns if not (name.startswith(\"decade\"))]\n\nfig, ax = plt.subplots(figsize=(12, 5))\n_, bump_artists = bumplot(\n    x=\"decade\",\n    y_columns=[(name, highlight.get(name, {})) for name in countries],\n    data=df,\n    curve_force=0.7,\n    ordinal_labels=True,\n    colors=[\"lightgray\"]\n)\nax.spines[[\"top\", \"right\", \"left\", \"bottom\"]].set_visible(False)\nax.margins(x=0.01)\nax.tick_params(size=0)\nax.tick_params(axis=\"x\", labelsize=14, pad=10)\nax.set_xticks(ax.get_xticks(), labels=[round(tick) for tick in ax.get_xticks()])\n\nfont_bold = load_google_font(\"Poppins\", weight=\"bold\")\nfor name, (_, scatter) in bump_artists.items():\n    _, last_y = scatter.get_offsets()[-1]\n    ax.text(\n        x=1,\n        y=last_y,\n        s=name,\n        size=11,\n        color=scatter.get_facecolor(),\n        va=\"center\",\n        ha=\"left\",\n        font=font_bold,\n        transform=ax.get_yaxis_transform(),\n    )\n\nfig.text(\n    x=0.5,\n    y=0.98,\n    s=\"# of water sources installations in africa\".upper(),\n    size=18,\n    ha=\"center\",\n    va=\"top\",\n    font=font_bold,\n)\nfig.text(\n    x=0.5,\n    y=0.91,\n    s=\"Ranking of each country based on the total number of water source installations for each decade\",\n    size=10,\n    ha=\"center\",\n    va=\"top\",\n    color=\"grey\",\n    font=load_google_font(\"Poppins\", italic=True),\n)\nfig.text(\n    x=0.12,\n    y=0,\n    s=\"Made with bumplot\\nGraphic: Joseph Barbier\",\n    va=\"top\",\n    color=\"grey\",\n    font=load_google_font(\"Poppins\", italic=True),\n    size=10,\n)\n</code></pre>"},{"location":"advanced-usage/#global-co2-emissions-rankings","title":"Global CO\u2082 Emissions Rankings","text":"<pre><code># mkdocs: render\nimport pandas as pd\nimport matplotlib.pyplot as plt\nfrom pyfonts import set_default_font, load_google_font\n\nfrom bumplot import bumplot, opts_from_color\n\nurl = \"https://raw.githubusercontent.com/owid/co2-data/master/owid-co2-data.csv\"\ndf_raw = pd.read_csv(url)\ncountries = [\n    \"United States\",\n    \"China\",\n    \"India\",\n    \"Russia\",\n    \"Japan\",\n    \"Germany\",\n    \"Iran\",\n    \"South Korea\",\n    \"Saudi Arabia\",\n    \"Indonesia\",\n]\nyears = [1930, 1940, 1950, 1960, 1970, 1980, 1990, 2000, 2010, 2020]\ndf = (\n    df_raw[df_raw[\"country\"].isin(countries) &amp; df_raw[\"year\"].isin(years)][\n        [\"year\", \"country\", \"co2\"]\n    ]\n    .dropna()\n    .pivot(index=\"year\", columns=\"country\", values=\"co2\")\n    .reset_index()\n)\n\nfont = load_google_font(\"Inter\")\nset_default_font(font)\n\nhighlight = {\n    \"China\": opts_from_color(\n        \"#ae2012\",\n        marker_size=100,\n        marker_edgewidth=2,\n        zorder=10,\n    ),\n    \"United States\": opts_from_color(\n        \"#005f73\",\n        marker_size=100,\n        marker_edgewidth=2,\n        zorder=10,\n    ),\n}\n\ncountries_to_plot = [col for col in df.columns if col != \"year\"]\n\nfig, ax = plt.subplots(figsize=(10, 7))\n_, bump_artists = bumplot(\n    x=\"year\",\n    y_columns=[(name, highlight.get(name, {})) for name in countries_to_plot],\n    data=df,\n    curve_force=0.7,\n    ordinal_labels=True,\n    colors=[\"#D1D5DB\"],\n    scatter_kwargs={\n        \"edgecolor\": \"#D1D5DB\",\n        \"s\": 40,\n        \"linewidth\": 1,\n        \"facecolor\": \"#F3F4F6\",\n    },\n    plot_kwargs={\"linewidth\": 1.5},\n)\n\nax.spines[[\"top\", \"right\", \"left\", \"bottom\"]].set_visible(False)\nax.tick_params(axis=\"x\", labelsize=11, pad=4, colors=\"#4a4e69\")\nax.tick_params(size=0)\n\nfont_medium = load_google_font(\"Inter\", weight=\"medium\")\nfor country in countries:\n    if country in bump_artists:\n        _, scatter = bump_artists[country]\n        _, last_y = scatter.get_offsets()[-1]\n\n        color = \"#ae2012\" if country == \"China\" else \"#4a4e69\"\n        weight = \"bold\" if country == \"China\" else \"regular\"\n        font_label = load_google_font(\"Inter\", weight=weight)\n\n        ax.text(\n            x=1,\n            y=last_y,\n            s=country,\n            size=11,\n            color=color,\n            va=\"center\",\n            ha=\"left\",\n            font=font_label,\n            transform=ax.get_yaxis_transform(),\n        )\n\nfont_bold = load_google_font(\"Inter\", weight=\"bold\")\nfig.text(\n    x=0.5,\n    y=0.97,\n    s=\"The Rise of China's CO\u2082 Emissions\",\n    size=20,\n    ha=\"center\",\n    va=\"top\",\n    font=font_bold,\n    color=\"#111827\",\n)\nfig.text(\n    x=0.5,\n    y=0.92,\n    s=\"Ranking of top 10 emitting countries, 1930\u20132020\",\n    size=11,\n    ha=\"center\",\n    va=\"top\",\n    color=\"#4a4e69\",\n)\nfig.text(\n    x=0.1,\n    y=0.04,\n    s=\"Source: Our World in Data \u00b7 CO\u2082 emissions dataset\",\n    va=\"bottom\",\n    ha=\"left\",\n    color=\"#4a4e69\",\n    size=8,\n)\nfig.text(\n    x=0.9,\n    y=0.04,\n    s=\"Made with bumplot\",\n    va=\"bottom\",\n    ha=\"right\",\n    color=\"#4a4e69\",\n    font=font_bold,\n    size=8,\n)\n</code></pre>"},{"location":"contributing/","title":"Contributing","text":"<p>Any kind of contribution is more than welcomed! There are several ways you can contribute:</p> <ul> <li>Opening GitHub issues to list the bugs you've found</li> <li>Implementation of new features or resolution of existing bugs</li> <li>Enhancing the documentation</li> </ul>"},{"location":"contributing/#setting-up-your-environment","title":"Setting up your environment","text":""},{"location":"contributing/#install-for-development","title":"Install for development","text":"<ul> <li> <p>Fork the repository to your own GitHub account.</p> </li> <li> <p>Clone your forked repository to your local machine (ensure you have Git installed):</p> </li> </ul> <pre><code>git clone https://github.com/github_user_name/bumplot.git\ncd bumplot\ngit remote add upstream https://github.com/y-sunflower/bumplot.git\n</code></pre> <ul> <li>Create a new branch:</li> </ul> <pre><code>git checkout -b my-feature\n</code></pre> <ul> <li>Set up your Python environment (ensure you have uv installed):</li> </ul> <pre><code>uv sync --all-extras --dev\nuv pip install -e .\n</code></pre>"},{"location":"contributing/#code","title":"Code","text":"<p>You can now make changes to the package and start coding!</p>"},{"location":"contributing/#run-the-test","title":"Run the test","text":"<p>It's recommended to use just.</p> <ul> <li>Test that everything works correctly by running:</li> </ul> <pre><code>just test\n</code></pre>"},{"location":"contributing/#preview-documentation-locally","title":"Preview documentation locally","text":"<pre><code>just preview\n</code></pre>"},{"location":"contributing/#push-changes","title":"Push changes","text":"<ul> <li>Commit and push your changes:</li> </ul> <pre><code>git add -A\ngit commit -m \"description of what you did\"\ngit push\n</code></pre> <ul> <li>Navigate to your fork on GitHub and click the \"Compare &amp; pull request\" button to open a new pull request.</li> </ul> <p>Congrats! Once your PR is merged, it will be part of <code>bumplot</code>.</p> <p></p>"},{"location":"examples/","title":"Examples","text":""},{"location":"examples/#minimal-bump-chart-with-default-settings","title":"Minimal bump chart with default settings","text":"<pre><code># mkdocs: render\nimport matplotlib.pyplot as plt\nimport pandas as pd\nfrom bumplot import bumplot\n\ndf = pd.DataFrame(\n    {\n        \"year\": [2019, 2020, 2021, 2022],\n        \"Team A\": [3, 1, 2, 4],\n        \"Team B\": [2, 3, 1, 2],\n        \"Team C\": [1, 2, 3, 1],\n    }\n)\n\nfig, ax = plt.subplots(figsize=(6, 3))\nbumplot(x=\"year\", y_columns=[\"Team A\", \"Team B\", \"Team C\"], data=df)\nax.legend()\n</code></pre>"},{"location":"examples/#stronger-curves-with-custom-colors","title":"Stronger curves with custom colors","text":"<pre><code># mkdocs: render\nimport matplotlib.pyplot as plt\nimport pandas as pd\nfrom bumplot import bumplot\n\ndf = pd.DataFrame(\n    {\n        \"season\": [\"S1\", \"S2\", \"S3\", \"S4\"],\n        \"X\": [5, 2, 6, 3],\n        \"Y\": [2, 6, 3, 5],\n        \"Z\": [6, 3, 5, 2],\n    }\n)\n\nfig, ax = plt.subplots(figsize=(7, 4))\nbumplot(\n    x=\"season\",\n    y_columns=[\"X\", \"Y\", \"Z\"],\n    data=df,\n    curve_force=1.5,\n    colors=[\"#d62828\", \"#f77f00\", \"#003049\"],\n    scatter_kwargs={\"s\": 200, \"zorder\": 3},\n    plot_kwargs={\"lw\": 3},\n)\nax.legend()\n</code></pre>"},{"location":"examples/#multiple-bump-plots-on-subplots","title":"Multiple bump plots on subplots","text":"<pre><code># mkdocs: render\nimport matplotlib.pyplot as plt\nimport pandas as pd\nfrom bumplot import bumplot\n\ndf = pd.DataFrame(\n    {\n        \"round\": [1, 2, 3, 4],\n        \"P1\": [1, 2, 3, 2],\n        \"P2\": [2, 1, 2, 1],\n        \"P3\": [3, 3, 1, 3],\n    }\n)\n\nfig, axs = plt.subplots(1, 2, figsize=(12, 4))\n\nbumplot(\n   x=\"round\",\n   y_columns=[\"P1\", \"P2\"],\n   data=df,\n   ax=axs[0],\n   colors=[\"#219ebc\", \"#ffb703\"]\n)\naxs[0].legend()\n\nbumplot(\n   x=\"round\",\n   y_columns=[\"P2\", \"P3\"],\n   data=df,\n   ax=axs[1],\n   colors=[\"#ffb703\", \"#da5363ff\"]\n)\naxs[1].legend()\n</code></pre>"},{"location":"examples/#without-inverting-y-axis","title":"Without inverting y-axis","text":"<pre><code># mkdocs: render\nimport matplotlib.pyplot as plt\nimport pandas as pd\nfrom bumplot import bumplot\n\ndf = pd.DataFrame(\n    {\n        \"x\": [2020, 2021, 2022, 2023],\n        \"A\": [10, 20, 30, 40],\n        \"B\": [40, 30, 20, 10],\n    }\n)\n\nfig, ax = plt.subplots(figsize=(6, 3))\nbumplot(\n    x=\"x\",\n    y_columns=[\"A\", \"B\"],\n    data=df,\n    invert_y_axis=False,\n    colors=[\"#06d6a0\", \"#118ab2\"],\n)\nax.legend()\n</code></pre>"},{"location":"examples/#flexible-styling","title":"Flexible Styling","text":"<pre><code># mkdocs: render\nimport matplotlib.pyplot as plt\nimport pandas as pd\n\nfrom bumplot import bumplot, opts, opts_from_color\n\ndata = pd.DataFrame(\n    {\n        \"x\": [2020, 2021, 2022, 2023],\n        \"A\": [10, 50, 20, 80],\n        \"B\": [40, 30, 60, 10],\n        \"C\": [90, 20, 70, 40],\n    }\n)\n\nfig, axes = plt.subplots(ncols=2, nrows=2, figsize=(12, 6), layout=\"constrained\")\n\naxes[0, 0].set_title(\"Basic, no additional options\")\nbumplot(x=\"x\", y_columns=[\"A\", \"B\", \"C\"], data=data, curve_force=0.5, ax=axes[0, 0])\n\n# plot_kwargs &amp; scatter_kwargs to set the default styles for ALL bumps\naxes[0, 1].set_title(\n    \"Plot-wide customizations passed via\\ncolors=\u2026, plot_kwargs=\u2026, scatter_kwargs=\u2026\"\n)\nbumplot(\n    x=\"x\",\n    y_columns=[\"A\", \"B\", \"C\"],\n    data=data,\n    curve_force=0.5,\n    ax=axes[0, 1],\n    colors=[\"#ffbe0b\", \"#ff006e\", \"#3a86ff\"],\n    plot_kwargs={\"lw\": 4},\n    scatter_kwargs={\"s\": 150, \"ec\": \"black\", \"lw\": 2, \"marker\": \"d\"},\n)\n\n# Customize individual Bumps via the opts(\u2026) helper\n# See: `bumplot.opts.BumpOpts` for all keyword arguments one can pass\naxes[1, 0].set_title(\"Color &amp; Style individual lines via opts\")\nbumplot(\n    x=\"x\",\n    y_columns=[\n        (\"A\", opts(line_color=\"#ffbe0b\", marker=\"d\", marker_size=140)),\n        (\"B\", opts(line_color=\"#ff006e\", line_style=\"--\")),\n        (\"C\", opts_from_color(\"#3a86ff\", line_width=5, marker_edgecolor=\"black\")),\n    ],\n    data=data,\n    curve_force=0.5,\n    ax=axes[1, 0],\n)\n\n# Mix individual Bump options with `plot_kwargs` and `scatter_kwargs`\naxes[1, 1].set_title(\"Mix options to create custom charts!\")\nbumplot(\n    x=\"x\",\n    y_columns=[\n        \"A\",\n        (\"B\", opts_from_color(\"#ff006e\", zorder=2, line_width=4, marker_size=80)),\n        \"C\",\n    ],\n    data=data,\n    curve_force=0.5,\n    ax=axes[1, 1],\n    plot_kwargs={\"lw\": 1, \"ec\": \"gray\"},\n    scatter_kwargs={\"fc\": \"gray\", \"ec\": \"gray\", \"s\": 20},\n)\n\nfor ax in axes.flat:\n    ax.margins(x=0.05)\n    ax.spines[[\"top\", \"right\"]].set_visible(False)\n</code></pre>"},{"location":"reference/bezier/","title":"Bezier","text":""},{"location":"reference/bezier/#bumplot.bezier.bezier_curve","title":"<code>bumplot.bezier.bezier_curve(x, y, force)</code>","text":"<p>Generate vertices and path codes for a smooth cubic B\u00e9zier curve passing through a sequence of points.</p> <p>This function is used under the hood by <code>bumplot()</code>, but you can use it too.</p> <p>Parameters:</p> Name Type Description Default <code>x</code> <code>ndarray</code> <p>X-coordinates of the points.</p> required <code>y</code> <code>ndarray</code> <p>Y-coordinates of the points.</p> required <code>force</code> <code>float</code> <p>Smoothing factor controlling curve tightness. Higher values increase curvature by moving control points further away from the anchors.</p> required <p>Returns:</p> Name Type Description <code>vertices</code> <code>list[tuple[float, float]]</code> <p>List of (x, y) vertices including control points for the B\u00e9zier segments.</p> <code>codes</code> <code>list[int]</code> <p>Corresponding matplotlib Path codes for constructing the curve.</p>"},{"location":"reference/bumplot/","title":"Bumplot","text":""},{"location":"reference/bumplot/#bumplot.bumplot","title":"<code>bumplot.bumplot(x, y_columns, data, curve_force=1, invert_y_axis=True, colors=None, plot_kwargs={}, scatter_kwargs={}, ax=None, ordinal_labels=False)</code>","text":"<p>Creates bump plot, or bump chart, from multiple numerical columns.</p> <p>It requires the data to be in wide format (e.g., one column per line you want to plot).</p> <p>Parameters:</p> Name Type Description Default <code>x</code> <code>str</code> <p>colname of the x-axis variable</p> required <code>y_columns</code> <code>Iterable[str | tuple[str, BumpOpts]]</code> <p>colnames of the y-axis variables and their plotting options.</p> required <code>data</code> <code>IntoDataFrame</code> <p>A dataframe</p> required <code>curve_force</code> <code>float</code> <p>Smoothing factor controlling curve tightness. Higher values increase curvature by moving control points further away from the anchors.</p> <code>1</code> <code>invert_y_axis</code> <code>bool</code> <p>Whether to invert y axis</p> <code>True</code> <code>colors</code> <code>Iterable[str] | None</code> <p>An optional list of colors</p> <code>None</code> <code>plot_kwargs</code> <code>dict[str, Any]</code> <p>Additional arguments passed to <code>patches.PathPatch()</code></p> <code>{}</code> <code>scatter_kwargs</code> <code>dict[str, Any]</code> <p>Additional arguments passed to <code>scatter()</code></p> <code>{}</code> <code>ax</code> <code>Axes | None</code> <p>The matplotlib Axes used. Default to <code>plt.gca()</code></p> <code>None</code> <code>ordinal_labels</code> <code>bool</code> <p>If True, converts y-axis labels to ordinal numbers (1st, 2nd, 3rd, etc.)</p> <code>False</code> <p>Returns:     The matplotlib Axes with the bump plot</p>"}]}